<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cheap Flights, Airfares and Air Tickets | Expedia</title>
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300,400,600,700&amp;lang=en"/>
    <link rel="stylesheet" href="../CSS/Flights.css">
    <link rel="stylesheet" href="..\CSS\flightComponent.css">
</head>
<body>

    <div class="navbar"  onclick="travellerFunctionHide()">

    </div>


    <div class="selection">
        <div style="    padding-left: 4%; ">
            <select name="One way"  class="select_Way">
             <option value="oneWay">One way</option>
             <option value="return">Return</option>
             <option value="multiCity">Multi-city</option>
            </select>
       </div>
        <!------------------------------------------------------------>   

       <div style="    padding-left: 4%;" >
               <div class="select_Way" id="totalTraveller" onclick="travellerFunction()"> 1 traveller ˅</div>
               <div class="traveller_part">
                  <p>We allow up to 6 travellers total per booking.</p>
                <div class="adults">
                   <div>Adults
                        <p>18 and older</p>
                   </div>
                   <div><button onclick="adultCountMinus()">-</button>   </div>
                   <div class="adultCount" id="adultCount">1</div>
                   <div><button onclick="adultCountPlus()">+</button>   </div>
                </div>
                <div class="adults">
                    <div>Children
                         <p>Age 2 and 17</p>
                    </div>
                    <div><button onclick="childrenCountMinus()">-</button>   </div>
                    <div class="childrenCount" id="childrenCount">0</div>
                    <div><button onclick="childrenCountPlus()">+</button>   </div>
                 </div>
                 <div class="adults">
                    <div>Infants
                         <p>Younger than 2</p>
                    </div>
                    <div><button onclick="infantsCountMinus()">-</button>   </div>
                    <div class="infantsCount" id="infantsCount">0</div>
                    <div><button onclick="infantsCountPlus()">+</button>   </div>
                 </div>
                 <div id="doneCancel">
                     <div onclick="travellerFunctionHide()">Cancel</div>
                     <div onclick="peopleBooked()">Done</div>
                 </div>
               </div>
        </div>
               <!------------------------------------------------------------>   

        <div style="    padding-left: 4%; ">
            <select name="One way"  class="select_Way">
                <option value="oneWay">Economy</option>
               </select>
        </div>
        <div style="    padding-left: 4%; ">
            <select  class="select_Way">
                <option value="Economy">Air airline</option>
               </select>
        </div>
        <div style="    padding-left: 4%; ">
            <select  class="select_Way">
                <option value="oneWay"> More options</option>
               </select>
        </div>
    </div>

    <div class="flight_s">
      <div class="s_b">

      </div>
    </div>
   
    <div class="chooseFlight" onclick="travellerFunctionHide()">
        
        <div class="filter">
            <h1>Filter by</h1>  
            <div class="stops">
              <div style="grid-area: 'a';"><p>Stops</p></div>
              <div style="grid-area: 'b';"><p>From</p></div>
              <div style="grid-area: 'c';"> <input type="checkbox">__Direct</div>
              <div style="grid-area: 'd';"><p>Rs4,593</p></div>
              <div style="grid-area: 'e';"><input type="checkbox">__1 stop</div>
              <div style="grid-area: 'f';"><p>Rs4,593</p></div>
            </div>

            <div class="stops">
              <div style="grid-area: 'a';"><p>Airlines</p></div>
              <div style="grid-area: 'b';"><p>From</p></div>
              <div style="grid-area: 'c';"> <input type="checkbox">__Indigo</div>
              <div style="grid-area: 'd';"><p>Rs4,593</p></div>
              <div style="grid-area: 'e';"><input type="checkbox">__Vistara</div>
              <div style="grid-area: 'f';"><p>Rs8,593</p></div>
            </div>
            <h1>Departure time </h1>  
            <div class="time">
                <div class="classOfTime1" onclick="changeDepartureColor('#3662D8','classOfTime1');">
                    <img src="/Images/sunrise.svg" >
                    <p>Morning</p>
                    <p>(05.00-11.59)</p>
                </div>
                <div  class="classOfTime2" onclick="changeDepartureColor('#3662D8','classOfTime2');">
                  <img src="/Images/noon.svg" >
                    <p>Afternoon</p>
                    <p>(12.00-17.59)</p>
                </div>
                <div class="classOfTime3"  onclick="changeDepartureColor('#3662D8','classOfTime3');">
                  <img src="/Images/evening.png" >
                    <p>Evening</p>
                    <p>(17.00-23.59)</p>
                </div>
            </div>
        </div>
        

        <div class="middlePart">
         
         <h1>Choose departing flight</h1>
         <div class="dayWisePrices">
          <div class="inDayWisePrices">
            <div>Tue, 5 Oct</div>
            <div>Rs4,593</div>
          </div>
          <div class="inDayWisePrices">
            <div>Wed, 6 Oct</div>
            <div>Rs4,593</div>
          </div>
          <div class="inDayWisePrices">
            <div>Thu, 7 Oct</div>
            <div>Rs4,593</div>
          </div>
          <div class="inDayWisePrices">
            <div>Fri, 8 Oct</div>
            <div>Rs4,593</div>
          </div>
          <div class="inDayWisePrices">
            <div>Sat, 9 Oct</div>
            <div>Rs4,593</div>
          </div>
          <div class="inDayWisePrices">
            <div>Sun, 10 Oct</div>
            <div>Rs4,593</div>
          </div>
          <div class="inDayWisePrices">
            <div>Mon, 11 Oct</div>
            <div>Rs4,593</div>
          </div>
         </div>
          <hr>
          <div class="sortByPrice">
            <div>
             <p>Prices displayed include taxes and may 
              change based on availability. You can review any additional 
              fees before checkout. Prices are not final until you 
              complete your purchase.</p>
            </div>
            <div>
                <select name="select Price" id="selectPrice">
                  <option value="Lowest">Price(Lowest)</option>
                  <option value="Highest">Price(Highest)</option>
                </select>
            </div>
            </div>

            <div class="display">
              
            </div>
          
        </div>





        <div class="rightPart">
            <img src="https://tpc.googlesyndication.com/simgad/17447823249981941085?" alt="">
        </div>  
    </div>


<div class="footer">
</div>
<hr>

<div class="footerCopyright">
</div>


</body>
</html>
<script src="https://code.iconify.design/2/2.0.4/iconify.min.js"></script>
<script type="module">
     import navbar from "../components/navbarImport.js";
     let divNavbar = document.querySelector(".navbar");
     divNavbar.innerHTML=navbar();

     import footer from "../components/footerImport.js";
     let divFooter = document.querySelector(".footer");
     divFooter.innerHTML=footer();

     import footerCopyright from "../components/footerCopyright.js";
     let divfooterCopyright = document.querySelector(".footerCopyright");
     divfooterCopyright.innerHTML=footerCopyright();

     import flightComponent from "../components/flightComponent.js";
     let sb = document.getElementsByClassName("s_b");
     sb[0].innerHTML = flightComponent();

     sb[0].removeChild(sb[0].children[0]);
     let sTemp = sb[0].children[0];
     sTemp.removeChild(sTemp.children[3]);
     let sTemp2 = sb[0];
     sTemp2.children[0].children[2].style.width = "28%";
     sTemp2.children[1].style.marginTop = "2%";

     let StoredData = JSON.parse(localStorage.getItem("storeCityDate"));
     
     sTemp2.children[0].children[0].children[1].children[0].style.fontSize = "12px";
     sTemp2.children[0].children[0].children[1].children[1].innerText = StoredData[0].DepartCity;

     sTemp2.children[0].children[1].children[2].children[0].style.fontSize = "12px";
     sTemp2.children[0].children[1].children[2].children[1].innerText = StoredData[0].ArriveCity;

     sTemp2.children[0].children[2].children[1].children[1].children[0].value = StoredData[0].Date;

    //  console.log(StoredData);

   
</script>

<script>
 function travellerFunction()
 {
     let anyName=document.querySelector(".traveller_part");
     if(anyName.style.display==="none" ){
        anyName.style.display = "block";
      }
     else{
        anyName.style.display = "none";
     }
}

function travellerFunctionHide()
{
    let anyName=document.querySelector(".traveller_part");
    anyName.style.display = "none";
}

function adultCountMinus()
{
  let div=document.getElementById("adultCount")
  let traveller=document.getElementById("totalTraveller")
  travellerText=traveller.innerHTML;
  var number = travellerText.match(/\d/g);
  number = number.join("");

  htmlContent=div.innerHTML;
  if(htmlContent!=0 )
  {
   div.innerHTML=htmlContent-1;
   traveller.innerHTML=number-1+" traveller ˅"; 
  }
}
 function childrenCountMinus()
 {
    let div=document.getElementById("childrenCount")
    htmlContent1=div.innerHTML;
    let traveller=document.getElementById("totalTraveller")
  travellerText=traveller.innerHTML;
  var number = travellerText.match(/\d/g);
  number = number.join("");

   if(htmlContent1!=0 ){
    div.innerHTML=htmlContent1-1;
    traveller.innerHTML=number-1+" traveller ˅"; 
  }
 }

 function infantsCountMinus()
 {
    let div=document.getElementById("infantsCount")
    htmlContent2=div.innerHTML;
    let traveller=document.getElementById("totalTraveller")
  travellerText=traveller.innerHTML;
  var number = travellerText.match(/\d/g);
  number = number.join("");

    if(htmlContent2!=0 ){
    div.innerHTML=htmlContent2-1;
    traveller.innerHTML=number-1+" traveller ˅"; 
   }
}

function adultCountPlus()
{
    let div=document.getElementById("adultCount")
  htmlContent=div.innerHTML;
  let traveller=document.getElementById("totalTraveller")
  travellerText=traveller.innerHTML;
  var number = travellerText.match(/\d/g);
  number = number.join("");

   if(htmlContent!=6 ){
  div.innerHTML=htmlContent-1+2;
  traveller.innerHTML=number-1+2+" traveller ˅"; 
  }
}

function childrenCountPlus()
{
    let div=document.getElementById("childrenCount")
  htmlContent=div.innerHTML;
  let traveller=document.getElementById("totalTraveller")
  travellerText=traveller.innerHTML;
  var number = travellerText.match(/\d/g);
  number = number.join("");

   if(htmlContent!=6 ){
  div.innerHTML=htmlContent-1+2;
  traveller.innerHTML=number-1+2+" traveller ˅"; 
  }
}

function infantsCountPlus()
{
    let div=document.getElementById("infantsCount")
  htmlContent=div.innerHTML;
  let traveller=document.getElementById("totalTraveller")
  travellerText=traveller.innerHTML;
  var number = travellerText.match(/\d/g);
  number = number.join("");

   if(htmlContent!=6 ){
  div.innerHTML=htmlContent-1+2;
  traveller.innerHTML=number-1+2+" traveller ˅"; 
  }
}

function peopleBooked()
{
  
}

async function loadFlights()
{
  let res= await fetch("http://localhost:5000/api/flights")
  let data=await res.json()
 // console.log(data[0].time)
  let sizeOfData=data.length;
  let displayDiv=document.querySelector(".display");
  data.sort(function(a, b) {
    return parseFloat(a.price) - parseFloat(b.price);
});
  console.log(data)
  for(let i=0;i<sizeOfData;i++)
  {
    let displayClass=document.createElement("div")
    displayDiv.appendChild(displayClass);
    displayClass.className="classInDisplay";
     displayClass.addEventListener("click",move);  
   
      let div=document.createElement("div")
      div.className="inDisplay";
      let divv=document.createElement("div")
      let divvv=document.createElement("div")
      div.appendChild(divv)
      div.appendChild(divvv)


      let div1=document.createElement("div")
      let div2=document.createElement("div")

      displayClass.appendChild(div)
      displayClass.appendChild(div1)
      displayClass.appendChild(div2)
      divv.innerHTML=data[i].time;
      divvv.innerHTML=data[i].airline;
      div1.innerHTML=data[i].stop;
      div2.innerHTML="Rs"+data[i].price;
   
  }
}
loadFlights();

function changeDepartureColor(color,div)
{
  if(div=="classOfTime1")
  {
    let a=document.querySelector(".classOfTime1");
    a.style.background=color ;
    let i=document.querySelector(".classOfTime2");
    i.style.background='white' ;
    let j=document.querySelector(".classOfTime3");
    j.style.background='white' ;

  }
  else if(div=="classOfTime2")
  {
    let b=document.querySelector(".classOfTime2");
    b.style.background=color ;
    let c=document.querySelector(".classOfTime1");
    c.style.background='white' ;
    let d=document.querySelector(".classOfTime3");
    d.style.background='white' ;
  }
   else if(div=="classOfTime3")
  {
    let e=document.querySelector(".classOfTime3");
    e.style.background=color ;
    let f=document.querySelector(".classOfTime1");
    f.style.background='white' ;
    let g=document.querySelector(".classOfTime2");
    g.style.background='white' ;
  }
}

function move()
{
   window.location="flightsCheckout.html";
}
</script>
<!-- <script src="../index.js"></script> -->